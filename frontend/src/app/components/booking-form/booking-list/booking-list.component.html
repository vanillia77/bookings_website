<div class="table-container">

  <div class="table-header">
    <div class="header-title-container">
      <span class="material-icons header-icon">event_note</span>
      <h2 class="header-title">Liste des Réservations</h2>
    </div>
    <div class="booking-count">
      {{ bookings.length }} Réservations
    </div>
  </div>

  <div class="table-content">
    <table class="booking-table">
      <thead>
        <tr>
          <th *ngIf="isAdmin()">USER</th>
          <th>Détails</th>
          <th>Nombre</th>
          <th>Téléphone</th>
          <th>Date Début</th>
          <th>Date Fin</th>
          <th>Heure</th>
          <th>Status</th>
          <th class="actions-column">Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let b of bookings" class="booking-row">

          <td *ngIf="isAdmin()" class="user-cell">
            <div class="user-name">{{ b.user_name }}</div>
            <div class="user-email">{{ b.user_email }}</div>
          </td>

          <td class="details-cell">{{ b.details }}</td>
          <td class="persons-cell">{{ b.persons || 1 }}</td>
          <td class="phone-cell">{{ b.phone || '-' }}</td>
          <td class="text-primary-cell">{{ b.date | date:'dd MMM yyyy' }}</td>
          <td class="text-primary-cell">{{ b.endDate ? (b.endDate | date:'dd MMM yyyy') : '-' }}</td>
          <td class="text-primary-cell">{{ formatTime(b) }}</td>

          <td>
            <span [ngStyle]="badgeStyle(b.status)" class="status-badge">
              {{ b.status == 'confirmed' ? 'Confirmé' : b.status == 'pending' ? 'En attente' : 'Annulé' }}
            </span>
          </td>

          <td class="actions-column">
            <div class="action-buttons">
              <button [routerLink]="['/bookings/edit', b.id]" class="btn-icon btn-edit" title="Modifier">
                <span class="material-icons">edit</span>
              </button>
              <button (click)="delete(b.id)" class="btn-icon btn-delete" title="Supprimer">
                <span class="material-icons">delete_outline</span>
              </button>
              <button *ngIf="isAdmin() && b.status === 'pending'" (click)="confirmBooking(b)"
                class="btn-icon btn-confirm" title="Confirmer">
                <span class="material-icons">check_circle_outline</span>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="bookings.length === 0" class="empty-state">
      <span class="material-icons empty-icon">inventory_2</span>
      <p class="empty-text">Aucune réservation pour le moment.</p>
    </div>

  </div>
</div>
