<div
  style="background: var(--card-bg); border-radius: 24px; box-shadow: 0 8px 30px var(--shadow-color); border: 1px solid var(--border-color); overflow: hidden; margin-top: 20px;">

  <div
    style="background: rgba(141, 110, 99, 0.05); padding: 25px 40px; border-bottom: 2px solid var(--border-color); display: flex; align-items: center; justify-content: space-between;">
    <div style="display: flex; align-items: center;">
      <span class="material-icons"
        style="color: var(--accent-color); margin-right: 12px; font-size: 28px;">event_note</span>
      <h2 style="margin: 0; color: var(--text-primary); font-weight: 800; font-size: 1.5rem; letter-spacing: -0.5px;">
        Liste des Réservations</h2>
    </div>
    <div
      style="font-size: 0.85rem; color: var(--text-secondary); font-weight: 700; text-transform: uppercase; letter-spacing: 1px;">
      {{ bookings.length }} Réservations
    </div>
  </div>

  <div style="padding: 10px 40px 30px 40px;">
    <table style="width: 100%; border-collapse: collapse; text-align: left;">
      <thead>
        <tr>
          <th *ngIf="isAdmin()"
            style="padding: 20px 15px; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; border-bottom: 1px solid var(--border-color);">
            USER</th>
          <th
            style="padding: 20px 15px; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; border-bottom: 1px solid var(--border-color);">
            Détails</th>
          <th
            style="padding: 20px 15px; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; border-bottom: 1px solid var(--border-color);">
            Nombre</th>
          <th
            style="padding: 20px 15px; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; border-bottom: 1px solid var(--border-color);">
            Téléphone</th>
          <th
            style="padding: 20px 15px; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; border-bottom: 1px solid var(--border-color);">
            Date Début</th>
          <th
            style="padding: 20px 15px; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; border-bottom: 1px solid var(--border-color);">
            Date Fin</th>
          <th
            style="padding: 20px 15px; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; border-bottom: 1px solid var(--border-color);">
            Heure</th>
          <th
            style="padding: 20px 15px; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; border-bottom: 1px solid var(--border-color);">
            Status</th>
          <th
            style="padding: 20px 15px; color: var(--text-secondary); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; border-bottom: 1px solid var(--border-color); text-align: right;">
            Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let b of bookings"
          style="border-bottom: 1px solid var(--border-color); transition: background 0.2s;"
          onmouseover="this.style.background='rgba(141, 110, 99, 0.02)'"
          onmouseout="this.style.background='transparent'">

          <td *ngIf="isAdmin()" style="padding: 15px;">
            <div style="font-weight: 700; color: var(--text-primary); font-size: 14px;">{{ b.user_name }}</div>
            <div style="font-size: 11px; color: var(--text-secondary);">{{ b.user_email }}</div>
          </td>

          <td style="padding: 15px; font-weight: 600; color: var(--text-primary); font-size: 14px;">{{ b.details }}
          </td>
          <td style="padding: 15px; font-size: 14px; font-weight: 700; color: var(--accent-color);">{{ b.persons || 1
            }}
          </td>
          <td style="padding: 15px; color: var(--text-secondary); font-size: 13px;">{{ b.phone || '-' }}</td>
          <td style="padding: 15px; font-size: 14px; color: var(--text-primary);">{{ b.date | date:'dd MMM yyyy' }}
          </td>
          <td style="padding: 15px; font-size: 14px; color: var(--text-primary);">{{ b.endDate ? (b.endDate | date:'dd
            MMM yyyy') : '-'
            }}</td>
          <td style="padding: 15px; font-size: 14px; color: var(--text-primary);">{{ formatTime(b) }}</td>

          <td style="padding: 15px;">
            <span [ngStyle]="badgeStyle(b.status)"
              style="padding: 6px 14px; border-radius: 20px; font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px;">
              {{ b.status == 'confirmed' ? 'Confirmé' : b.status == 'pending' ? 'En attente' : 'Annulé' }}
            </span>
          </td>

          <td style="padding: 15px; text-align: right;">
            <div style="display: flex; gap: 8px; justify-content: flex-end;">
              <button [routerLink]="['/bookings/edit', b.id]"
                style="background: rgba(141, 110, 99, 0.1); border: none; color: var(--accent-color); cursor: pointer; padding: 10px; border-radius: 12px; transition: all 0.2s;"
                onmouseover="this.style.background='var(--accent-color)'; this.style.color='white'"
                onmouseout="this.style.background='rgba(141, 110, 99, 0.1)'; this.style.color='var(--accent-color)'"
                title="Modifier">
                <span class="material-icons" style="font-size: 20px;">edit</span>
              </button>
              <button (click)="delete(b.id)"
                style="background: rgba(229, 115, 115, 0.1); border: none; color: #d32f2f; cursor: pointer; padding: 10px; border-radius: 12px; transition: all 0.2s;"
                onmouseover="this.style.background='#d32f2f'; this.style.color='white'"
                onmouseout="this.style.background='rgba(229, 115, 115, 0.1)'; this.style.color='#d32f2f'"
                title="Supprimer">
                <span class="material-icons" style="font-size: 20px;">delete_outline</span>
              </button>
              <button *ngIf="isAdmin() && b.status === 'pending'" (click)="confirmBooking(b)"
                style="background: rgba(129, 199, 132, 0.1); border: none; color: #388e3c; cursor: pointer; padding: 10px; border-radius: 12px; transition: all 0.2s;"
                onmouseover="this.style.background='#388e3c'; this.style.color='white'"
                onmouseout="this.style.background='rgba(129, 199, 132, 0.1)'; this.style.color='#388e3c'"
                title="Confirmer">
                <span class="material-icons" style="font-size: 20px;">check_circle_outline</span>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="bookings.length === 0"
      style="padding: 60px 0; text-align: center; color: #bbb; display: flex; flex-direction: column; align-items: center; gap: 15px;">
      <span class="material-icons" style="font-size: 56px; opacity: 0.15;">inventory_2</span>
      <p style="margin: 0; font-weight: 500; font-size: 15px;">Aucune réservation pour le moment.</p>
    </div>

  </div>
</div>