<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Aperçu du Tableau de Bord</h1>
  </div>

  <!-- Actions / Booking Form -->
  <div class="actions-section">
    <app-booking-form (created)="loadCalendar(); loadStats()"></app-booking-form>
  </div>

  <!-- Filters -->
  <div class="filters-container">
    <div class="filter-group">
      <label>Date de début</label>
      <mat-form-field appearance="outline">
        <input matInput [matDatepicker]="startPicker" [(ngModel)]="startDate">
        <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
        <mat-datepicker #startPicker></mat-datepicker>
      </mat-form-field>
    </div>
    <div class="filter-group">
      <label>Date de fin</label>
      <mat-form-field appearance="outline">
        <input matInput [matDatepicker]="endPicker" [(ngModel)]="endDate">
        <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
        <mat-datepicker #endPicker></mat-datepicker>
      </mat-form-field>
    </div>
    <div class="filter-group">
      <label>Statut</label>
      <select [(ngModel)]="status">
        <option value="all">Tous les statuts</option>
        <option value="confirmed">Confirmé</option>
        <option value="pending">En attente</option>
        <option value="cancelled">Annulé</option>
      </select>
    </div>
    <button (mousedown)="applyFilters()" (click)="applyFilters()">
      <span class="material-icons">filter_list</span>
      Appliquer les filtres
    </button>
  </div>

  <!-- KPI Cards -->
  <div class="kpi-grid">
    <div class="kpi-card total">
      <div class="kpi-icon">
        <span class="material-icons">analytics</span>
      </div>
      <div class="kpi-content">
        <h3>Total Réservations</h3>
        <p class="kpi-value">{{ totalReservations }}</p>
      </div>
    </div>
    <div class="kpi-card pending">
      <div class="kpi-icon">
        <span class="material-icons">hourglass_empty</span>
      </div>
      <div class="kpi-content">
        <h3>En attente</h3>
        <p class="kpi-value">{{ pendingCount }}</p>
      </div>
    </div>
    <div class="kpi-card confirmed">
      <div class="kpi-icon">
        <span class="material-icons">check_circle</span>
      </div>
      <div class="kpi-content">
        <h3>Confirmé</h3>
        <p class="kpi-value">{{ confirmedCount }}</p>
      </div>
    </div>
    <div class="kpi-card cancelled">
      <div class="kpi-icon">
        <span class="material-icons">cancel</span>
      </div>
      <div class="kpi-content">
        <h3>Annulé</h3>
        <p class="kpi-value">{{ cancelledCount }}</p>
      </div>
    </div>
  </div>

  <div class="charts-calendar-grid">
    <!-- Chart Section -->
    <div class="chart-container">
      <div class="card-header">
        <span class="material-icons">bar_chart</span>
        <h2>Statut des Réservations</h2>
      </div>
      <canvas baseChart [data]="barChartData" [options]="barChartOptions" [type]="barChartType"
        [legend]="barChartLegend">
      </canvas>
    </div>

    <!-- Calendar Section -->
    <div class="calendar-container">
      <div class="card-header">
        <span class="material-icons">event</span>
        <h2>Calendrier des Réservations</h2>
      </div>
      <full-calendar [options]="calendarOptions"></full-calendar>
    </div>
  </div>
</div>